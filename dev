#!/bin/bash

cd PRJ_PATH

# Parse arguments
PROJECT_NAME=""
ENVIRONMENT="dev"
SHOW_HELP=false

# Parse command line arguments
while [[ $# -gt 0 ]]; do
    case $1 in
        --env)
            ENVIRONMENT="$2"
            shift 2
            ;;
        --help|-h)
            SHOW_HELP=true
            shift
            ;;
        -*)
            echo "Unknown option $1"
            SHOW_HELP=true
            shift
            ;;
        *)
            if [ "$PROJECT_NAME" = "" ]; then
                PROJECT_NAME="$1"
            else
                echo "Error: Multiple project names provided"
                SHOW_HELP=true
            fi
            shift
            ;;
    esac
done

if [ "$SHOW_HELP" = true ]; then
    echo "Usage: dev [project-name] [--env environment]"
    echo "Arguments and Options..."
    exit 0
fi

# Validate environment and run docker compose
case $ENVIRONMENT in
    dev|prod|test)
        echo "Environment: $ENVIRONMENT"
        ;;
    *)
        echo "Invalid environment"
        exit 1
        ;;
esac

docker compose up --build
